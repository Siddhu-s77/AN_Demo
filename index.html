<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elevator Monitoring Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style> 
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }
        .glow-green {
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
        }
        .glow-red {
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }
        .gauge-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .gauge-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }
        /* Sidebar Styles */
        .sidebar {
            width: 260px;
        }
        .sidebar.collapsed {
            width: 70px;
        }
        .sidebar.collapsed .sidebar-text {
            display: none !important;
        }
        .sidebar.collapsed .sidebar-content {
            display: none !important;
        }
        .sidebar:not(.collapsed) .sidebar-tooltip {
            display: none !important;
        }
        .sidebar.collapsed .firmware-btn,
        .sidebar.collapsed .user-btn {
            justify-content: center;
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        .sidebar.collapsed .firmware-btn .w-10,
        .sidebar.collapsed .user-btn .w-12 {
            margin: 0 auto;
        }
        /* Hide scrollbar but keep scrolling functionality */
        .hide-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;  /* Chrome, Safari and Opera */
        }
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 2s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-screen">
    <!-- Header -->
    <header class="bg-gray-800/90 backdrop-blur-sm border-b border-gray-700/50 shadow-lg">
        <div class="flex items-center justify-between px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-5 md:py-6">
            <h1 class="text-xl sm:text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-300 tracking-tight">Elevator Monitoring Dashboard</h1>
                <button id="refreshBtn" class="bg-gray-700/80 hover:bg-gray-600 text-white px-3 sm:px-4 md:px-5 py-1.5 sm:py-2 md:py-2.5 rounded-lg transition-all duration-300 flex items-center gap-1.5 sm:gap-2 shadow-md hover:shadow-lg hover:scale-105 active:scale-95 font-medium text-xs sm:text-sm border border-gray-600/50 hover:border-gray-500">
                    <svg class="w-5 h-5 transition-transform duration-300 group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Refresh
                </button>
        </div>
    </header>

    <!-- Main Layout with Sidebar -->
    <div class="flex">
        <!-- Left Sidebar - WhatsApp Style Chat List -->
        <aside id="sidebar" class="sidebar bg-[#202C33] border-r border-gray-700/30 h-screen flex flex-col transition-all duration-300 relative">
            <!-- Sidebar Header -->
            <div class="bg-[#111B21] px-4 py-4 border-b border-gray-700/30 flex items-center justify-between flex-shrink-0">
                <h2 class="sidebar-text text-lg font-semibold text-white whitespace-nowrap">Chats</h2>
                <button id="sidebarToggle" class="p-2 hover:bg-[#2A3942] rounded-lg transition-colors">
                    <svg id="toggleIcon" class="w-5 h-5 text-white transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>
                    </svg>
                </button>
            </div>
            
            <!-- User Chat List -->
            <div class="flex-1 py-2 overflow-y-auto hide-scrollbar">
                <button id="userBtn1" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-[#2A3942]" data-user="1">
                    <!-- Profile Picture -->
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">R</span>
                    </div>
                    <!-- Content -->
                    <div class="sidebar-content flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <h3 class="text-white font-medium text-base whitespace-nowrap">Rajesh Kumar</h3>
                        </div>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: A4:B2:C1:D3:E5:F6</p>
                    </div>
                    <!-- Tooltip for collapsed state -->
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Rajesh Kumar
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full">
                            <div class="border-4 border-transparent border-r-gray-900"></div>
                        </div>
                    </div>
                </button>
                
                <button id="userBtn2" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="2">
                    <!-- Profile Picture -->
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-green-400 to-teal-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">P</span>
                    </div>
                    <!-- Content -->
                    <div class="sidebar-content flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <h3 class="text-white font-medium text-base whitespace-nowrap">Priya Sharma</h3>
                        </div>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: B5:C3:D2:E4:F6:A1</p>
                    </div>
                    <!-- Tooltip for collapsed state -->
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Priya Sharma
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full">
                            <div class="border-4 border-transparent border-r-gray-900"></div>
                        </div>
                    </div>
                </button>
                
                <button id="userBtn3" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="3">
                    <!-- Profile Picture -->
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-pink-400 to-red-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">A</span>
                    </div>
                    <!-- Content -->
                    <div class="sidebar-content flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <h3 class="text-white font-medium text-base whitespace-nowrap">Amit Patel</h3>
                        </div>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: C6:D4:E3:F5:A2:B1</p>
                    </div>
                    <!-- Tooltip for collapsed state -->
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Amit Patel
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full">
                            <div class="border-4 border-transparent border-r-gray-900"></div>
                        </div>
                    </div>
                </button>
                
                <button id="userBtn4" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="4">
                    <!-- Profile Picture -->
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">K</span>
                    </div>
                    <!-- Content -->
                    <div class="sidebar-content flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <h3 class="text-white font-medium text-base whitespace-nowrap">Kavita Singh</h3>
                        </div>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: D1:E5:F2:A3:B4:C6</p>
                    </div>
                    <!-- Tooltip for collapsed state -->
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Kavita Singh
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full">
                            <div class="border-4 border-transparent border-r-gray-900"></div>
                        </div>
                    </div>
                </button>
                
                <button id="userBtn5" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="5">
                    <!-- Profile Picture -->
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-indigo-400 to-blue-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">V</span>
                    </div>
                    <!-- Content -->
                    <div class="sidebar-content flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <h3 class="text-white font-medium text-base whitespace-nowrap">Vikram Reddy</h3>
                        </div>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: E2:F6:A1:B3:C4:D5</p>
                    </div>
                    <!-- Tooltip for collapsed state -->
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Vikram Reddy
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full">
                            <div class="border-4 border-transparent border-r-gray-900"></div>
                        </div>
                    </div>
                </button>
                
                <button id="userBtn6" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="6">
                    <!-- Profile Picture -->
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">A</span>
                    </div>
                    <!-- Content -->
                    <div class="sidebar-content flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <h3 class="text-white font-medium text-base whitespace-nowrap">Anjali Desai</h3>
                        </div>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: F3:A4:B5:C1:D2:E6</p>
                    </div>
                    <!-- Tooltip for collapsed state -->
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Anjali Desai
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full">
                            <div class="border-4 border-transparent border-r-gray-900"></div>
                        </div>
                    </div>
                </button>
                
                <button id="userBtn7" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="7">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">R</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Rohit Mehta</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: G1:H2:I3:J4:K5:L6</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Rohit Mehta
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn8" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="8">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">S</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Sneha Joshi</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: H3:I4:J5:K6:L1:M2</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Sneha Joshi
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn9" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="9">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">A</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Arjun Nair</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: I5:J6:K1:L2:M3:N4</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Arjun Nair
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn10" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="10">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">M</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Meera Iyer</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: J7:K1:L2:M3:N4:O5</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Meera Iyer
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn11" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="11">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">K</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Karan Malhotra</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: K2:L3:M4:N5:O6:P1</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Karan Malhotra
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn12" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="12">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">D</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Divya Rao</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: L4:M5:N6:O1:P2:Q3</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Divya Rao
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn13" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="13">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">S</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Suresh Menon</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: M6:N1:O2:P3:Q4:R5</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Suresh Menon
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn14" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="14">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-violet-400 to-purple-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">N</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Neha Agarwal</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: N2:O3:P4:Q5:R6:S1</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Neha Agarwal
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn15" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="15">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">R</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Rahul Kapoor</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: O4:P5:Q6:R1:S2:T3</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Rahul Kapoor
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn16" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="16">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-emerald-400 to-green-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">P</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Pooja Verma</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: P6:Q1:R2:S3:T4:U5</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Pooja Verma
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn17" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="17">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-red-400 to-pink-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">A</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Aditya Shah</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: Q2:R3:S4:T5:U6:V1</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Aditya Shah
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn18" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="18">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-indigo-400 to-blue-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">S</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Sunita Nanda</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: R4:S5:T6:U1:V2:W3</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Sunita Nanda
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn19" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="19">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">M</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Manoj Tiwari</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: S6:T1:U2:V3:W4:X5</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Manoj Tiwari
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn20" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="20">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-orange-400 to-yellow-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">D</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Deepika Menon</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: T2:U3:V4:W5:X6:Y1</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Deepika Menon
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn21" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="21">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-purple-400 to-violet-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">N</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Nikhil Gupta</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: U4:V5:W6:X1:Y2:Z3</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Nikhil Gupta
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn22" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="22">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-pink-400 to-red-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">S</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Shreya Bhatt</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: V6:W1:X2:Y3:Z4:A5</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Shreya Bhatt
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn23" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="23">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-blue-400 to-cyan-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">V</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Varun Chawla</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: W2:X3:Y4:Z5:A6:B1</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Varun Chawla
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn24" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="24">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-green-400 to-teal-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">I</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Isha Reddy</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: X4:Y5:Z6:A1:B2:C3</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Isha Reddy
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
                
                <button id="userBtn25" class="user-btn group relative w-full px-4 py-3 hover:bg-[#2A3942] active:bg-[#202C33] transition-all duration-150 flex items-center gap-3 cursor-pointer border-b border-gray-700/20 bg-transparent" data-user="25">
                    <div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">Y</span>
                    </div>
                    <div class="sidebar-content flex-1 min-w-0">
                        <h3 class="text-white font-medium text-base whitespace-nowrap">Yash Agarwal</h3>
                        <p class="text-gray-400 text-xs mt-0.5 truncate sidebar-text">MAC: Y6:Z1:A2:B3:C4:D5</p>
                    </div>
                    <div class="sidebar-tooltip absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 whitespace-nowrap">
                        Yash Agarwal
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full"><div class="border-4 border-transparent border-r-gray-900"></div></div>
                    </div>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 h-screen overflow-y-auto hide-scrollbar">
        <!-- Loading State -->
        <div id="loadingState" class="text-center py-16">
            <div class="inline-block animate-spin rounded-full h-14 w-14 border-4 border-gray-700 border-t-green-500 border-r-green-500"></div>
            <p class="mt-6 text-gray-300 text-lg font-medium">Loading diagnostics...</p>
            <p class="mt-2 text-gray-500 text-sm">Please wait while we fetch the latest data</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden bg-gradient-to-r from-red-900/90 to-red-800/90 border border-red-700/50 rounded-xl p-5 mb-6 shadow-xl backdrop-blur-sm">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <svg class="w-6 h-6 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <p class="ml-3 text-red-100 font-medium" id="errorMessage">Failed to load data. Please check your backend connection.</p>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div id="dashboardContent" class="hidden">
            <!-- Profile Header -->
            <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 mb-6 shadow-xl border border-gray-600/50 backdrop-blur-sm">
                <div class="flex items-center justify-between">
                    <!-- Left Side: Profile DP and Name -->
                    <div class="flex items-center gap-4">
                        <div id="profilePicture" class="w-16 h-16 sm:w-20 sm:h-20 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                            <span id="profileInitial" class="text-white font-bold text-2xl">R</span>
                        </div>
                        <div>
                            <h3 id="profileName" class="text-white font-semibold text-lg sm:text-xl">Rajesh Kumar</h3>
                            <p id="profileMac" class="text-gray-400 text-xs sm:text-sm mt-1">MAC: A4:B2:C1:D3:E5:F6</p>
                        </div>
                    </div>
                    <!-- Right Side: Location -->
                    <div class="flex items-center gap-2 text-gray-300">
                        <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        <span id="locationText" class="text-sm sm:text-base font-medium">Mumbai, Maharashtra</span>
                    </div>
                </div>
            </div>
            
            <!-- Elevator Monitoring Panels -->
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 mb-6">
                <!-- Controller Load -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 mb-4 uppercase tracking-wider">Controller Load</h2>
                    <div class="gauge-container h-32 sm:h-40 md:h-48">
                        <canvas id="controllerLoadChart"></canvas>
                        <div class="gauge-value" id="controllerLoadValue">54%</div>
                    </div>
                        </div>

                <!-- Motor Current -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 mb-4 uppercase tracking-wider">Motor Current</h2>
                    <div class="h-32 sm:h-40 md:h-48">
                        <canvas id="motorCurrentChart"></canvas>
                    </div>
                </div> 

                <!-- Power Consumption -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 mb-4 uppercase tracking-wider">Power Consumption</h2>
                    <div class="text-center mb-2">
                        <p class="text-white text-3xl sm:text-4xl md:text-5xl font-bold" id="powerConsumptionValue">5.8 kW</p>
                    </div>
                    <div class="h-24 sm:h-32 md:h-40">
                        <canvas id="powerConsumptionChart"></canvas>
                    </div>
                </div>

                <!-- Door Cycles -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 mb-4 uppercase tracking-wider">Door Cycles</h2>
                    <div class="text-center mb-2">
                        <p class="text-white text-3xl sm:text-4xl md:text-5xl font-bold" id="doorCyclesValue">32</p>
                        </div>
                    <div class="h-24 sm:h-32 md:h-40">
                        <canvas id="doorCyclesChart"></canvas>
                    </div>
                </div>

                <!-- Elevator Speed -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 mb-4 uppercase tracking-wider">Elevator Speed</h2>
                    <div class="gauge-container h-32 sm:h-40 md:h-48">
                        <canvas id="elevatorSpeedChart"></canvas>
                        <div class="gauge-value" id="elevatorSpeedValue">1.2 m/s</div>
                    </div>
                    <p class="text-gray-400 text-xs text-center mt-2">Design speed: 1.6</p>
                </div>

                <!-- Temperature -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 mb-4 uppercase tracking-wider">Temperature</h2>
                    <div class="h-32 sm:h-40 md:h-48">
                        <canvas id="temperatureChart"></canvas>
                    </div>
                    </div>
                </div>

            <!-- Firmware Table -->
            <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm mb-6">
                <button id="firmwareToggleBtn" class="w-full flex items-center justify-between mb-4 group cursor-pointer hover:bg-gray-600/30 rounded-lg px-3 py-2 transition-all duration-300 active:scale-95">
                    <h2 class="text-xs sm:text-sm font-semibold text-gray-300 uppercase tracking-wider group-hover:text-white transition-colors duration-300">Firmware Status</h2>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-400 group-hover:text-gray-300 transition-colors duration-300">Click to expand</span>
                        <div class="relative">
                            <svg id="firmwareArrowIcon" class="w-6 h-6 text-blue-400 group-hover:text-blue-300 transition-all duration-300 group-hover:scale-110 animate-bounce-slow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 9l-7 7-7-7"></path>
                            </svg>
                            <div class="absolute inset-0 bg-blue-400/20 rounded-full blur-md group-hover:bg-blue-400/30 transition-all duration-300 animate-pulse"></div>
                        </div>
                    </div>
                </button>
                <div id="firmwareTableContainer" class="overflow-x-auto transition-all duration-300 max-h-96 overflow-y-auto hide-scrollbar">
                        <table class="min-w-full">
                            <thead class="sticky top-0 bg-gray-700/95 backdrop-blur-sm z-10">
                                <tr class="border-b border-gray-600/50">
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider">Client</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider">Firmware ID</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider">Status</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider">Last Check</th>
                                </tr>
                            </thead>
                        <tbody id="firmwareTableBody" class="divide-y divide-gray-600/30">
                                <!-- Data will be populated here -->
                            </tbody>
                        </table>
                </div>
            </div>

            <!-- Advanced Diagnostics Section -->
            <div class="mb-6">
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3">
                    <div>
                        <h2 class="text-lg sm:text-xl font-bold text-white">Advanced Diagnostics</h2>
                        <p class="text-xs text-gray-400 mt-1">Comprehensive system analysis and monitoring</p>
                    </div>
                    <div class="flex gap-2">
                        <button id="refreshDiagnosticsBtn" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2 text-sm">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            Refresh
                        </button>
                        <button id="exportDiagnosticsBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2 text-sm">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Export Report
                        </button>
                    </div>
                </div>

                <!-- System Health Overview -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-20 h-20 bg-green-500/10 rounded-full -mr-10 -mt-10"></div>
                        <div class="relative">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">System Health</h3>
                                <div id="systemHealthIndicator" class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></div>
                            </div>
                            <p id="systemHealthValue" class="text-3xl font-bold text-white mb-1">92%</p>
                            <div class="w-full bg-gray-600 rounded-full h-2 mb-2">
                                <div id="systemHealthBar" class="bg-gradient-to-r from-green-500 to-emerald-400 h-2 rounded-full transition-all duration-500" style="width: 92%"></div>
                            </div>
                            <p class="text-xs text-gray-400">All systems operational</p>
                            <div class="mt-2 flex items-center gap-2 text-xs">
                                <span class="text-green-400"> 2%</span>
                                <span class="text-gray-500">vs last week</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Active Errors</h3>
                            <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <p id="activeErrorsValue" class="text-2xl font-bold text-white">2</p>
                        <p class="text-xs text-gray-400 mt-1">Minor issues detected</p>
                    </div>

                    <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Uptime</h3>
                            <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <p id="uptimeValue" class="text-2xl font-bold text-white">45d</p>
                        <p class="text-xs text-gray-400 mt-1">Continuous operation</p>
                    </div>

                    <div class="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl p-4 fade-in card-hover shadow-xl border border-gray-600/50 backdrop-blur-sm">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Maintenance Due</h3>
                            <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <p id="maintenanceDueValue" class="text-2xl font-bold text-white">12d</p>
                        <p class="text-xs text-gray-400 mt-1">Scheduled service</p>
                    </div>
                </div>

                <!-- Historical Trends Chart -->
                <div class="bg-gradient-to-br from-gray-700 via-gray-750 to-gray-800 rounded-xl p-4 sm:p-6 fade-in card-hover shadow-2xl border border-gray-600/50 backdrop-blur-sm mb-6 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-blue-500/5 rounded-full -mr-16 -mt-16"></div>
                    <div class="absolute bottom-0 left-0 w-24 h-24 bg-green-500/5 rounded-full -ml-12 -mb-12"></div>
                    <div class="relative">
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3">
                            <div>
                                <h3 class="text-sm font-semibold text-white uppercase tracking-wider mb-1">System Health Trends</h3>
                                <p class="text-xs text-gray-400" id="trendsPeriodText">Last 7 Days</p>
                            </div>
                            <div class="flex gap-2 bg-gray-600/50 p-1 rounded-lg">
                                <button class="diagnosticTimeBtn active text-xs px-4 py-2 bg-blue-600 text-white rounded-md font-medium transition-all duration-300 hover:bg-blue-700 shadow-lg" data-period="7d">7D</button>
                                <button class="diagnosticTimeBtn text-xs px-4 py-2 bg-transparent text-gray-300 rounded-md font-medium transition-all duration-300 hover:bg-gray-600/50 hover:text-white" data-period="30d">30D</button>
                                <button class="diagnosticTimeBtn text-xs px-4 py-2 bg-transparent text-gray-300 rounded-md font-medium transition-all duration-300 hover:bg-gray-600/50 hover:text-white" data-period="90d">90D</button>
                            </div>
                        </div>
                        <div class="h-72 bg-gray-800/30 rounded-lg p-3 border border-gray-600/30">
                            <canvas id="healthTrendsChart"></canvas>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    </div>
    <script>
        // Chart instances
        let controllerLoadChart = null;
        let motorCurrentChart = null;
        let powerConsumptionChart = null;
        let doorCyclesChart = null;
        let elevatorSpeedChart = null;
        let temperatureChart = null;
        let healthTrendsChart = null;

        // Current selected firmware and user
        let currentFirmware = 1;
        let currentUserId = 1;

        // User data with profile info and locations (25 Indian Users)
        // Random firmware statuses for each user
        const firmwareStatuses = ['OK', 'Mismatch', 'Update Required', 'OK', 'OK', 'Mismatch', 'OK', 'Update Required', 'OK', 'OK', 'Mismatch', 'OK', 'OK', 'Update Required', 'OK', 'Mismatch', 'OK', 'OK', 'Update Required', 'OK', 'Mismatch', 'OK', 'OK', 'Update Required', 'OK'];
        const firmwareIds = ['1.2.104', '1.2.102', '1.2:105', '1.2.106', '1.2.103', '1.2:107', '1.2.108', '1.2:109', '1.2.110', '1.2.111', '1.2:112', '1.2.113', '1.2.114', '1.2:115', '1.2.116', '1.2:117', '1.2.118', '1.2.119', '1.2:120', '1.2.121', '1.2:122', '1.2.123', '1.2.124', '1.2:125', '1.2.126'];
        // Random door cycle times (mix of mins=red and hours/days=green)
        const doorCycleTimes = ['25 mins', '3 hours', '1 day', '45 mins', '5 hours', '2 days', '15 mins', '8 hours', '1 day', '30 mins', '4 hours', '2 days', '20 mins', '6 hours', '1 day', '50 mins', '12 hours', '3 days', '10 mins', '7 hours', '1 day', '35 mins', '9 hours', '2 days', '40 mins'];

        const userData = {
            1: { name: 'Rajesh Kumar', mac: 'A4:B2:C1:D3:E5:F6', profileImg: 'https://i.pravatar.cc/150?img=15', location: 'Mumbai, Maharashtra', gradient: 'from-blue-400 to-purple-500', initial: 'R', firmwareStatus: firmwareStatuses[0], firmwareId: firmwareIds[0], doorCycleTime: doorCycleTimes[0] },
            2: { name: 'Priya Sharma', mac: 'B5:C3:D2:E4:F6:A1', profileImg: 'https://i.pravatar.cc/150?img=20', location: 'Delhi, NCR', gradient: 'from-green-400 to-teal-500', initial: 'P', firmwareStatus: firmwareStatuses[1], firmwareId: firmwareIds[1], doorCycleTime: doorCycleTimes[1] },
            3: { name: 'Amit Patel', mac: 'C6:D4:E3:F5:A2:B1', profileImg: 'https://i.pravatar.cc/150?img=25', location: 'Bangalore, Karnataka', gradient: 'from-pink-400 to-red-500', initial: 'A', firmwareStatus: firmwareStatuses[2], firmwareId: firmwareIds[2], doorCycleTime: doorCycleTimes[2] },
            4: { name: 'Kavita Singh', mac: 'D1:E5:F2:A3:B4:C6', profileImg: 'https://i.pravatar.cc/150?img=30', location: 'Chennai, Tamil Nadu', gradient: 'from-yellow-400 to-orange-500', initial: 'K', firmwareStatus: firmwareStatuses[3], firmwareId: firmwareIds[3], doorCycleTime: doorCycleTimes[3] },
            5: { name: 'Vikram Reddy', mac: 'E2:F6:A1:B3:C4:D5', profileImg: 'https://i.pravatar.cc/150?img=35', location: 'Hyderabad, Telangana', gradient: 'from-indigo-400 to-blue-500', initial: 'V', firmwareStatus: firmwareStatuses[4], firmwareId: firmwareIds[4], doorCycleTime: doorCycleTimes[4] },
            6: { name: 'Anjali Desai', mac: 'F3:A4:B5:C1:D2:E6', profileImg: 'https://i.pravatar.cc/150?img=40', location: 'Pune, Maharashtra', gradient: 'from-cyan-400 to-blue-500', initial: 'A', firmwareStatus: firmwareStatuses[5], firmwareId: firmwareIds[5], doorCycleTime: doorCycleTimes[5] },
            7: { name: 'Rohit Mehta', mac: 'G1:H2:I3:J4:K5:L6', profileImg: 'https://i.pravatar.cc/150?img=45', location: 'Kolkata, West Bengal', gradient: 'from-purple-400 to-pink-500', initial: 'R', firmwareStatus: firmwareStatuses[6], firmwareId: firmwareIds[6], doorCycleTime: doorCycleTimes[6] },
            8: { name: 'Sneha Joshi', mac: 'H3:I4:J5:K6:L1:M2', profileImg: 'https://i.pravatar.cc/150?img=50', location: 'Ahmedabad, Gujarat', gradient: 'from-teal-400 to-cyan-500', initial: 'S', firmwareStatus: firmwareStatuses[7], firmwareId: firmwareIds[7], doorCycleTime: doorCycleTimes[7] },
            9: { name: 'Arjun Nair', mac: 'I5:J6:K1:L2:M3:N4', profileImg: 'https://i.pravatar.cc/150?img=55', location: 'Jaipur, Rajasthan', gradient: 'from-orange-400 to-red-500', initial: 'A', firmwareStatus: firmwareStatuses[8], firmwareId: firmwareIds[8], doorCycleTime: doorCycleTimes[8] },
            10: { name: 'Meera Iyer', mac: 'J7:K1:L2:M3:N4:O5', profileImg: 'https://i.pravatar.cc/150?img=60', location: 'Surat, Gujarat', gradient: 'from-blue-400 to-indigo-500', initial: 'M', firmwareStatus: firmwareStatuses[9], firmwareId: firmwareIds[9], doorCycleTime: doorCycleTimes[9] },
            11: { name: 'Karan Malhotra', mac: 'K2:L3:M4:N5:O6:P1', profileImg: 'https://i.pravatar.cc/150?img=5', location: 'Lucknow, Uttar Pradesh', gradient: 'from-green-400 to-emerald-500', initial: 'K', firmwareStatus: firmwareStatuses[10], firmwareId: firmwareIds[10], doorCycleTime: doorCycleTimes[10] },
            12: { name: 'Divya Rao', mac: 'L4:M5:N6:O1:P2:Q3', profileImg: 'https://i.pravatar.cc/150?img=10', location: 'Kanpur, Uttar Pradesh', gradient: 'from-pink-400 to-rose-500', initial: 'D', firmwareStatus: firmwareStatuses[11], firmwareId: firmwareIds[11], doorCycleTime: doorCycleTimes[11] },
            13: { name: 'Suresh Menon', mac: 'M6:N1:O2:P3:Q4:R5', profileImg: 'https://i.pravatar.cc/150?img=65', location: 'Nagpur, Maharashtra', gradient: 'from-yellow-400 to-amber-500', initial: 'S', firmwareStatus: firmwareStatuses[12], firmwareId: firmwareIds[12], doorCycleTime: doorCycleTimes[12] },
            14: { name: 'Neha Agarwal', mac: 'N2:O3:P4:Q5:R6:S1', profileImg: 'https://i.pravatar.cc/150?img=70', location: 'Indore, Madhya Pradesh', gradient: 'from-violet-400 to-purple-500', initial: 'N', firmwareStatus: firmwareStatuses[13], firmwareId: firmwareIds[13], doorCycleTime: doorCycleTimes[13] },
            15: { name: 'Rahul Kapoor', mac: 'O4:P5:Q6:R1:S2:T3', profileImg: 'https://i.pravatar.cc/150?img=3', location: 'Thane, Maharashtra', gradient: 'from-cyan-400 to-blue-500', initial: 'R', firmwareStatus: firmwareStatuses[14], firmwareId: firmwareIds[14], doorCycleTime: doorCycleTimes[14] },
            16: { name: 'Pooja Verma', mac: 'P6:Q1:R2:S3:T4:U5', profileImg: 'https://i.pravatar.cc/150?img=8', location: 'Bhopal, Madhya Pradesh', gradient: 'from-emerald-400 to-green-500', initial: 'P', firmwareStatus: firmwareStatuses[15], firmwareId: firmwareIds[15], doorCycleTime: doorCycleTimes[15] },
            17: { name: 'Aditya Shah', mac: 'Q2:R3:S4:T5:U6:V1', profileImg: 'https://i.pravatar.cc/150?img=13', location: 'Visakhapatnam, Andhra Pradesh', gradient: 'from-red-400 to-pink-500', initial: 'A', firmwareStatus: firmwareStatuses[16], firmwareId: firmwareIds[16], doorCycleTime: doorCycleTimes[16] },
            18: { name: 'Sunita Nanda', mac: 'R4:S5:T6:U1:V2:W3', profileImg: 'https://i.pravatar.cc/150?img=18', location: 'Patna, Bihar', gradient: 'from-indigo-400 to-blue-500', initial: 'S', firmwareStatus: firmwareStatuses[17], firmwareId: firmwareIds[17], doorCycleTime: doorCycleTimes[17] },
            19: { name: 'Manoj Tiwari', mac: 'S6:T1:U2:V3:W4:X5', profileImg: 'https://i.pravatar.cc/150?img=23', location: 'Vadodara, Gujarat', gradient: 'from-teal-400 to-cyan-500', initial: 'M', firmwareStatus: firmwareStatuses[18], firmwareId: firmwareIds[18], doorCycleTime: doorCycleTimes[18] },
            20: { name: 'Deepika Menon', mac: 'T2:U3:V4:W5:X6:Y1', profileImg: 'https://i.pravatar.cc/150?img=28', location: 'Ghaziabad, Uttar Pradesh', gradient: 'from-orange-400 to-yellow-500', initial: 'D', firmwareStatus: firmwareStatuses[19], firmwareId: firmwareIds[19], doorCycleTime: doorCycleTimes[19] },
            21: { name: 'Nikhil Gupta', mac: 'U4:V5:W6:X1:Y2:Z3', profileImg: 'https://i.pravatar.cc/150?img=33', location: 'Ludhiana, Punjab', gradient: 'from-purple-400 to-violet-500', initial: 'N', firmwareStatus: firmwareStatuses[20], firmwareId: firmwareIds[20], doorCycleTime: doorCycleTimes[20] },
            22: { name: 'Shreya Bhatt', mac: 'V6:W1:X2:Y3:Z4:A5', profileImg: 'https://i.pravatar.cc/150?img=38', location: 'Agra, Uttar Pradesh', gradient: 'from-pink-400 to-red-500', initial: 'S', firmwareStatus: firmwareStatuses[21], firmwareId: firmwareIds[21], doorCycleTime: doorCycleTimes[21] },
            23: { name: 'Varun Chawla', mac: 'W2:X3:Y4:Z5:A6:B1', profileImg: 'https://i.pravatar.cc/150?img=43', location: 'Nashik, Maharashtra', gradient: 'from-blue-400 to-cyan-500', initial: 'V', firmwareStatus: firmwareStatuses[22], firmwareId: firmwareIds[22], doorCycleTime: doorCycleTimes[22] },
            24: { name: 'Isha Reddy', mac: 'X4:Y5:Z6:A1:B2:C3', profileImg: 'https://i.pravatar.cc/150?img=48', location: 'Faridabad, Haryana', gradient: 'from-green-400 to-teal-500', initial: 'I', firmwareStatus: firmwareStatuses[23], firmwareId: firmwareIds[23], doorCycleTime: doorCycleTimes[23] },
            25: { name: 'Yash Agarwal', mac: 'Y6:Z1:A2:B3:C4:D5', profileImg: 'https://i.pravatar.cc/150?img=53', location: 'Meerut, Uttar Pradesh', gradient: 'from-indigo-400 to-purple-500', initial: 'Y', firmwareStatus: firmwareStatuses[24], firmwareId: firmwareIds[24], doorCycleTime: doorCycleTimes[24] }
        };

        // Advanced Diagnostics Data
        const diagnosticsData = {
            errorLogs: [
                { time: '10:45 AM', type: 'warning', message: 'Door sensor calibration required', component: 'Door System' },
                { time: '09:32 AM', type: 'error', message: 'Motor temperature exceeded threshold', component: 'Motor' },
                { time: '08:15 AM', type: 'info', message: 'Scheduled maintenance completed', component: 'System' },
                { time: '07:58 AM', type: 'warning', message: 'Power consumption spike detected', component: 'Power System' },
                { time: '06:20 AM', type: 'info', message: 'System startup completed successfully', component: 'System' }
            ],
            components: [
                { name: 'Motor Controller', status: 'operational', health: 95 },
                { name: 'Door Mechanism', status: 'warning', health: 78 },
                { name: 'Safety Brakes', status: 'operational', health: 98 },
                { name: 'Cable System', status: 'operational', health: 92 },
                { name: 'Control Panel', status: 'operational', health: 88 },
                { name: 'Sensors Array', status: 'operational', health: 91 }
            ],
            maintenanceAlerts: [
                { priority: 'high', title: 'Lubrication Required', description: 'Motor bearings need lubrication', dueDate: '3 days' },
                { priority: 'medium', title: 'Filter Replacement', description: 'Air filter replacement due', dueDate: '7 days' },
                { priority: 'low', title: 'Routine Inspection', description: 'Monthly safety inspection', dueDate: '12 days' }
            ]
        };

        // Export Diagnostics Report
        function exportDiagnosticsReport() {
            const report = {
                timestamp: new Date().toISOString(),
                systemHealth: document.getElementById('systemHealthValue').textContent,
                activeErrors: document.getElementById('activeErrorsValue').textContent,
                uptime: document.getElementById('uptimeValue').textContent,
                maintenanceDue: document.getElementById('maintenanceDueValue').textContent,
                errorLogs: diagnosticsData.errorLogs,
                components: diagnosticsData.components,
                maintenanceAlerts: diagnosticsData.maintenanceAlerts
            };

            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `diagnostics-report-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Data sets for each firmware
        const firmwareData = {
            1: {
                controllerLoad: 54,
                motorCurrent: [65, 70, 75, 80, 85, 82, 78, 75, 72, 68, 70, 75],
                powerConsumption: 5.8,
                powerConsumptionHistory: [5.2, 5.4, 5.6, 5.7, 5.8, 5.9, 5.8, 5.7],
                doorCycles: '32 mins',
                doorCyclesHistory: [5, 8, 12, 15, 18, 22, 28, 32],
                elevatorSpeed: 1.2,
                temperature: [40, 45, 50, 55, 60, 65, 68, 70],
                firmwareInfo: { id: '1.2.104', status: 'OK', lastCheck: 'Today, 10:55' }
            },
            2: {
                controllerLoad: 68,
                motorCurrent: [70, 75, 80, 85, 90, 88, 85, 82, 80, 78, 75, 80],
                powerConsumption: 6.5,
                powerConsumptionHistory: [6.0, 6.2, 6.3, 6.4, 6.5, 6.6, 6.5, 6.4],
                doorCycles: '2 hours',
                doorCyclesHistory: [8, 12, 18, 22, 28, 35, 40, 45],
                elevatorSpeed: 1.4,
                temperature: [42, 48, 55, 60, 65, 70, 72, 75],
                firmwareInfo: { id: '1.2.102', status: 'OK', lastCheck: 'Today, 11:20' }
            },
            3: {
                controllerLoad: 78,
                motorCurrent: [75, 80, 85, 90, 95, 92, 88, 85, 82, 80, 78, 85],
                powerConsumption: 7.2,
                powerConsumptionHistory: [6.8, 7.0, 7.1, 7.2, 7.3, 7.2, 7.1, 7.0],
                doorCycles: '1 day',
                doorCyclesHistory: [10, 15, 22, 30, 38, 45, 52, 58],
                elevatorSpeed: 0.9,
                temperature: [45, 52, 60, 68, 75, 80, 82, 85],
                firmwareInfo: { id: '1.2:105', status: 'Mismatch', lastCheck: 'Today, 10:55' }
            }
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            // Setup sidebar toggle
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const toggleIcon = document.getElementById('toggleIcon');
            
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('collapsed');
                if (sidebar.classList.contains('collapsed')) {
                    toggleIcon.style.transform = 'rotate(180deg)';
                } else {
                    toggleIcon.style.transform = 'rotate(0deg)';
                }
            });

            // User to Firmware mapping (25 users mapped to 3 firmware sets)
            // Cycles through firmware 1, 2, 3: User 1->1, User 2->2, User 3->3, User 4->1, etc.
            function getUserFirmware(userId) {
                return ((userId - 1) % 3) + 1;
            }

            // Setup user buttons
            document.querySelectorAll('.user-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const userId = parseInt(btn.dataset.user);
                    const firmware = getUserFirmware(userId);
                    selectUser(userId, firmware);
                });
            });

            // Setup refresh button
            document.getElementById('refreshBtn').addEventListener('click', () => {
                updateDashboard(currentFirmware);
            });

            // Export diagnostics button
            const exportBtn = document.getElementById('exportDiagnosticsBtn');
            if (exportBtn) {
                exportBtn.addEventListener('click', exportDiagnosticsReport);
            }

            // Refresh diagnostics button
            const refreshDiagnosticsBtn = document.getElementById('refreshDiagnosticsBtn');
            if (refreshDiagnosticsBtn) {
                refreshDiagnosticsBtn.addEventListener('click', () => {
                    updateAdvancedDiagnostics();
                });
            }

            // Time period buttons for trends
            document.querySelectorAll('.diagnosticTimeBtn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.diagnosticTimeBtn').forEach(b => {
                        b.classList.remove('active', 'bg-blue-600', 'text-white', 'shadow-lg');
                        b.classList.add('bg-transparent', 'text-gray-300');
                    });
                    btn.classList.add('active', 'bg-blue-600', 'text-white', 'shadow-lg');
                    btn.classList.remove('bg-transparent', 'text-gray-300');
                    const period = btn.dataset.period;
                    updateHealthTrendsChart(period);
                });
            });

            // Firmware Status Toggle
            const firmwareToggleBtn = document.getElementById('firmwareToggleBtn');
            const firmwareTableContainer = document.getElementById('firmwareTableContainer');
            const firmwareArrowIcon = document.getElementById('firmwareArrowIcon');
            
            if (firmwareToggleBtn && firmwareTableContainer) {
                let isExpanded = false;
                
                // Initial state - collapsed with animation
                firmwareTableContainer.style.maxHeight = '0';
                firmwareTableContainer.style.opacity = '0';
                firmwareTableContainer.style.overflow = 'hidden';
                firmwareArrowIcon.style.transform = 'rotate(-90deg)';
                firmwareArrowIcon.classList.add('animate-bounce-slow');
                
                firmwareToggleBtn.addEventListener('click', () => {
                    isExpanded = !isExpanded;
                    if (isExpanded) {
                        firmwareTableContainer.style.maxHeight = '384px'; // max-h-96 = 384px
                        firmwareTableContainer.style.opacity = '1';
                        firmwareTableContainer.style.overflowY = 'auto';
                        firmwareArrowIcon.style.transform = 'rotate(0deg) scale(1)';
                        firmwareArrowIcon.classList.remove('animate-bounce-slow');
                    } else {
                        firmwareTableContainer.style.maxHeight = '0';
                        firmwareTableContainer.style.opacity = '0';
                        firmwareTableContainer.style.overflow = 'hidden';
                        firmwareArrowIcon.style.transform = 'rotate(-90deg) scale(1)';
                        firmwareArrowIcon.classList.add('animate-bounce-slow');
                    }
                });
            }

            // Load initial data
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('dashboardContent').classList.remove('hidden');
            selectUser(1, 1);
        });

        // Select user and update dashboard
        function selectUser(userId, firmware) {
            currentFirmware = firmware;
            currentUserId = userId;
            
            // Update button styles (WhatsApp style)
            document.querySelectorAll('.user-btn').forEach(btn => {
                const btnUserId = parseInt(btn.dataset.user);
                if (btnUserId === userId) {
                    // Active state - WhatsApp dark green background
                    btn.classList.remove('bg-transparent');
                    btn.classList.add('bg-[#2A3942]');
                } else {
                    // Inactive state - transparent background
                    btn.classList.remove('bg-[#2A3942]');
                    btn.classList.add('bg-transparent');
                }
            });

            // Update profile header
            updateProfileHeader(userId);

            updateDashboard(firmware);
        }

        // Update profile header with user info
        function updateProfileHeader(userId) {
            const user = userData[userId];
            if (!user) return;

            // Update profile picture with initial
            const profilePicture = document.getElementById('profilePicture');
            const profileInitial = document.getElementById('profileInitial');
            
            // Update gradient background
            profilePicture.className = `w-16 h-16 sm:w-20 sm:h-20 rounded-full overflow-hidden flex-shrink-0 bg-gradient-to-br ${user.gradient} flex items-center justify-center`;
            
            // Update initial
            profileInitial.textContent = user.initial;

            // Update name and MAC
            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileMac').textContent = `MAC: ${user.mac}`;

            // Update location
            document.getElementById('locationText').textContent = user.location;
        }

        // Update all dashboard elements
        function updateDashboard(firmware) {
            const data = firmwareData[firmware];
            const user = userData[currentUserId];
            
            // Update Controller Load
            updateControllerLoad(data.controllerLoad);
            
            // Update Motor Current
            updateMotorCurrent(data.motorCurrent);
            
            // Update Power Consumption
            updatePowerConsumption(data.powerConsumption, data.powerConsumptionHistory);
            
            // Update Door Cycles (use user's door cycle time)
            updateDoorCycles(user.doorCycleTime, data.doorCyclesHistory);
            
            // Update Elevator Speed
            updateElevatorSpeed(data.elevatorSpeed);
            
            // Update Temperature
            updateTemperature(data.temperature);
            
            // Update Firmware Table
            updateFirmwareTable();
            
            // Update Advanced Diagnostics
            updateAdvancedDiagnostics();
        }

        // Update Controller Load (Gauge Chart)
        function updateControllerLoad(value) {
            const ctx = document.getElementById('controllerLoadChart');
            document.getElementById('controllerLoadValue').textContent = value + '%';
            
            if (controllerLoadChart) {
                controllerLoadChart.destroy();
            }
            
            controllerLoadChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [value, 100 - value],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(55, 65, 81, 0.3)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                }
            });
        }

        // Update Motor Current (Line Chart)
        function updateMotorCurrent(data) {
            const ctx = document.getElementById('motorCurrentChart');
            
            if (motorCurrentChart) {
                motorCurrentChart.destroy();
            }
            
            const labels = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00'];
            
            motorCurrentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Motor Current',
                        data: data,
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 8,
                            callbacks: {
                                label: (context) => context.parsed.y + '%'
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', maxTicksLimit: 4 },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', stepSize: 20 },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            min: 0,
                            max: 100
                        }
                    }
                }
            });
        }

        // Update Power Consumption
        function updatePowerConsumption(value, history) {
            document.getElementById('powerConsumptionValue').textContent = value.toFixed(1) + ' kW';
            
            const ctx = document.getElementById('powerConsumptionChart');
            
            if (powerConsumptionChart) {
                powerConsumptionChart.destroy();
            }
            
            powerConsumptionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['', '', '', '', '', '', '', ''],
                    datasets: [{
                        label: 'Power',
                        data: history,
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.3)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 8,
                            callbacks: {
                                label: (context) => context.parsed.y.toFixed(1) + ' kW'
                            }
                        }
                    },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    }
                }
            });
        }

        // Update Door Cycles
        function updateDoorCycles(value, history) {
            const doorCyclesValueEl = document.getElementById('doorCyclesValue');
            doorCyclesValueEl.textContent = value;
            
            // Check if value is in minutes (red) or hours/days (green)
            const isMinutes = value.toLowerCase().includes('mins') || value.toLowerCase().includes('min');
            const statusColor = isMinutes ? 'text-red-400' : 'text-green-400';
            doorCyclesValueEl.className = `text-3xl font-bold ${statusColor}`;
            
            const ctx = document.getElementById('doorCyclesChart');
            
            if (doorCyclesChart) {
                doorCyclesChart.destroy();
            }
            
            // Set chart color based on time status
            const chartColor = isMinutes ? 'rgba(239, 68, 68, 0.8)' : 'rgba(34, 197, 94, 0.8)';
            const chartBorderColor = isMinutes ? 'rgb(239, 68, 68)' : 'rgb(34, 197, 94)';
            
            doorCyclesChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['00:00', '03:00', '06:00', '09:00', '12:00', '15:00', '18:00', '21:00'],
                    datasets: [{
                        label: 'Cycles',
                        data: history,
                        backgroundColor: chartColor,
                        borderColor: chartBorderColor,
                        borderWidth: 0,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 8,
                            callbacks: {
                                label: (context) => context.parsed.y + ' cycles'
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', maxTicksLimit: 4 },
                            grid: { display: false }
                        },
                        y: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', stepSize: 10 },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Update Elevator Speed (Gauge Chart)
        function updateElevatorSpeed(value) {
            const ctx = document.getElementById('elevatorSpeedChart');
            document.getElementById('elevatorSpeedValue').textContent = value.toFixed(1) + ' m/s';
            
            if (elevatorSpeedChart) {
                elevatorSpeedChart.destroy();
            }
            
            const percentage = (value / 1.6) * 100;
            
            elevatorSpeedChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [percentage, 100 - percentage],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(55, 65, 81, 0.3)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                }
            });
        }

        // Update Temperature (Line Chart)
        function updateTemperature(data) {
            const ctx = document.getElementById('temperatureChart');
            
            if (temperatureChart) {
                temperatureChart.destroy();
            }
            
            const labels = ['00:00', '02:00', '04:00', '06:00', '08:00', '10:00', '12:00', '14:00'];
            
            temperatureChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Temperature',
                        data: data,
                        borderColor: 'rgb(234, 179, 8)',
                        backgroundColor: 'rgba(234, 179, 8, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 8,
                            callbacks: {
                                label: (context) => context.parsed.y + 'C'
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', maxTicksLimit: 4 },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', stepSize: 10 },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            min: 35,
                            max: 90
                        }
                    }
                }
            });
        }

        // Get current time in 12-hour format "Today, HH:MM AM/PM"
        function getCurrentTime12Hour() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            const hoursStr = hours.toString().padStart(2, '0');
            return `Today, ${hoursStr}:${minutes} ${ampm}`;
        }

        // Random Indian Names Pool
        const randomIndianNames = [
            'Arvind Deshmukh', 'Bhavana Nair', 'Chandan Reddy', 'Deepak Joshi', 'Ekta Verma',
            'Farhan Khan', 'Gauri Iyer', 'Harsh Mehta', 'Ishita Patel', 'Jatin Agarwal',
            'Kavya Menon', 'Lakshmi Rao', 'Manish Tiwari', 'Neha Chawla', 'Omkar Singh',
            'Priyanka Nanda', 'Rahul Bhatt', 'Sakshi Gupta', 'Tarun Kapoor', 'Uma Sharma',
            'Vikash Malhotra', 'Yashika Shah', 'Zainab Ali', 'Aakash Kumar', 'Bhumika Das'
        ];

        // Update Firmware Table (25 reports with random Indian names)
        function updateFirmwareTable() {
            const tbody = document.getElementById('firmwareTableBody');
            tbody.innerHTML = '';
            
            // Get current time once for all elevators
            const currentTime = getCurrentTime12Hour();
            
            // Firmware IDs pool
            const firmwareIdPool = ['1.2.104', '1.2.102', '1.2:105', '1.2.106', '1.2.103', '1.2:107', '1.2.108', '1.2:109', '1.2.110', '1.2.111', '1.2:112', '1.2.113', '1.2.114', '1.2:115', '1.2.116', '1.2:117', '1.2.118', '1.2.119', '1.2:120', '1.2.121', '1.2:122', '1.2.123', '1.2.124', '1.2:125', '1.2.126'];
            const statusPool = ['OK', 'Mismatch', 'Update Required', 'OK', 'OK', 'Mismatch', 'OK', 'Update Required', 'OK', 'OK', 'Mismatch', 'OK', 'OK', 'Update Required', 'OK', 'Mismatch', 'OK', 'OK', 'Update Required', 'OK', 'Mismatch', 'OK', 'OK', 'Update Required', 'OK'];
            
            // Shuffle names array to get random order
            const shuffledNames = [...randomIndianNames].sort(() => Math.random() - 0.5);
            
            // Show 25 reports with random Indian names
            for (let i = 0; i < 25; i++) {
                const row = document.createElement('tr');
                // Use random firmware ID and status
                const randomFirmwareId = firmwareIdPool[i];
                const randomStatus = statusPool[i];
                const clientName = shuffledNames[i];
                
                const isMismatch = randomStatus === 'Mismatch' || randomStatus === 'Update Required';
                
                row.className = `hover:bg-gray-600/30 transition-all duration-300`;
                
                const statusColor = isMismatch ? 'text-red-400' : 'text-green-400';
                const firmwareIdColor = randomFirmwareId.includes(':') ? 'text-red-400' : 'text-green-400';
                const statusIcon = isMismatch ? '' : '<svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm font-medium text-white">${clientName}</td>
                    <td class="px-4 py-3 text-sm ${firmwareIdColor} font-mono">${randomFirmwareId}</td>
                    <td class="px-4 py-3 text-sm font-semibold ${statusColor}">
                        ${statusIcon}${randomStatus}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-400">${currentTime}</td>
                `;
                
                tbody.appendChild(row);
            }
        }

        // Update Advanced Diagnostics
        function updateAdvancedDiagnostics() {
            updateSystemHealth();
            updateHealthTrendsChart();
        }

        // Update System Health Overview
        function updateSystemHealth() {
            const systemHealth = Math.floor(Math.random() * 10) + 88; // 88-97%
            const activeErrors = Math.floor(Math.random() * 3) + 1; // 1-3 errors
            const uptime = Math.floor(Math.random() * 20) + 35; // 35-54 days
            const maintenanceDue = Math.floor(Math.random() * 10) + 8; // 8-17 days

            document.getElementById('systemHealthValue').textContent = systemHealth + '%';
            document.getElementById('activeErrorsValue').textContent = activeErrors;
            document.getElementById('uptimeValue').textContent = uptime + 'd';
            document.getElementById('maintenanceDueValue').textContent = maintenanceDue + 'd';

            // Update health bar
            const healthBar = document.getElementById('systemHealthBar');
            healthBar.style.width = systemHealth + '%';

            // Update health indicator color
            const indicator = document.getElementById('systemHealthIndicator');
            if (systemHealth >= 90) {
                indicator.className = 'w-3 h-3 rounded-full bg-green-500 animate-pulse';
                healthBar.className = 'bg-gradient-to-r from-green-500 to-emerald-400 h-2 rounded-full transition-all duration-500';
            } else if (systemHealth >= 75) {
                indicator.className = 'w-3 h-3 rounded-full bg-yellow-500 animate-pulse';
                healthBar.className = 'bg-gradient-to-r from-yellow-500 to-amber-400 h-2 rounded-full transition-all duration-500';
            } else {
                indicator.className = 'w-3 h-3 rounded-full bg-red-500 animate-pulse';
                healthBar.className = 'bg-gradient-to-r from-red-500 to-pink-400 h-2 rounded-full transition-all duration-500';
            }
        }

        // Update Health Trends Chart
        function updateHealthTrendsChart(period = '7d') {
            const ctx = document.getElementById('healthTrendsChart');
            if (!ctx) return;

            if (healthTrendsChart) {
                healthTrendsChart.destroy();
            }

            let labels, data, periodText;
            if (period === '7d') {
                labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                data = [88, 90, 89, 92, 91, 93, 92];
                periodText = 'Last 7 Days';
            } else if (period === '30d') {
                labels = [];
                data = [];
                for (let i = 0; i < 30; i += 5) {
                    labels.push(`Day ${i + 1}`);
                    data.push(Math.floor(Math.random() * 10) + 85);
                }
                periodText = 'Last 30 Days';
            } else {
                labels = [];
                data = [];
                for (let i = 0; i < 12; i++) {
                    labels.push(`Week ${i + 1}`);
                    data.push(Math.floor(Math.random() * 10) + 85);
                }
                periodText = 'Last 90 Days';
            }

            // Update period text
            const periodTextEl = document.getElementById('trendsPeriodText');
            if (periodTextEl) {
                periodTextEl.textContent = periodText;
            }

            healthTrendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'System Health',
                        data: data,
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: 'rgb(34, 197, 94)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            callbacks: {
                                label: (context) => 'Health: ' + context.parsed.y + '%'
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', font: { size: 11 } },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: {
                            display: true,
                            ticks: { color: 'rgba(255, 255, 255, 0.5)', font: { size: 11 } },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            min: 80,
                            max: 100
                        }
                    }
                }
            });
        }


        // Export Diagnostics Report
        function exportDiagnosticsReport() {
            const report = {
                timestamp: new Date().toISOString(),
                systemHealth: document.getElementById('systemHealthValue').textContent,
                activeErrors: document.getElementById('activeErrorsValue').textContent,
                uptime: document.getElementById('uptimeValue').textContent,
                maintenanceDue: document.getElementById('maintenanceDueValue').textContent,
                errorLogs: diagnosticsData.errorLogs,
                components: diagnosticsData.components,
                maintenanceAlerts: diagnosticsData.maintenanceAlerts
            };

            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `diagnostics-report-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

    </script>
</body>
</html>

